{% extends "base.html" %}
{% block title %}Demander une animation pour anniversaire, entreprise, école - Spectacle'ment VØtre{% endblock %}

{% block content %}
<div class="demande-wrap" style="background:linear-gradient(135deg,#1b2a4e 0%,#355c7d 100%); border:2px solid #355c7d; border-radius:16px; padding:32px; margin-bottom:32px; position:relative; overflow:hidden; box-shadow:0 4px 16px #355c7d22; color:#fff;">
  <h1 style="margin:0 0 8px 0;">Demande d'animation</h1>
  <p class="text-muted" style="margin:0 0 24px 0;">
    Remplissez les informations essentielles. Les champs marqués <span style="color:var(--primary); font-weight:700;">*</span> sont obligatoires.
  </p>

  <form action="{{ url_for('demande_animation') }}" method="POST" class="form demande-form" novalidate>
    
    <fieldset class="demande-section">
      <legend>1) Vos coordonnées</legend>

      <div class="grid-2">
        <label>
          <span class="label-text">Structure / Organisateur <span class="req">*</span></span>
          <input type="text" id="structure" name="structure" required autocomplete="organization"
                 placeholder="Mairie, école, association…"
                 value="{{ request.form.get('structure','') }}">
          <small class="hint">Ex : Mairie de X, École Y, Association Z…</small>
        </label>

        <label>
          <span class="label-text">Nom / Prénom (contact principal) <span class="req">*</span></span>
          <input type="text" id="nom" name="nom" required autocomplete="name"
                 placeholder="Votre nom"
                 value="{{ request.form.get('nom','') }}">
        </label>
      </div>

      <div class="grid-2">
        <label>
          <span class="label-text">E-mail de contact <span class="req">*</span></span>
          <input type="email" id="contact_email" name="contact_email" required autocomplete="email"
                 placeholder="votre@email.fr"
                 value="{{ request.form.get('contact_email','') }}">
          <small class="hint">Nous l'utilisons uniquement pour répondre à votre demande.</small>
        </label>

        <label>
          <span class="label-text">Téléphone <span class="req">*</span></span>
          <input type="tel" id="telephone" name="telephone" required autocomplete="tel"
                 inputmode="tel" placeholder="06 00 00 00 00"
                 value="{{ request.form.get('telephone','') }}">
        </label>
      </div>
    </fieldset>

    <fieldset class="demande-section">
      <legend>2) Votre événement</legend>

      <div class="grid-2">
        <label>
          <span class="label-text">Lieu / Ville <span class="req">*</span></span>
          <input type="text" id="lieu_ville" name="lieu_ville" required autocomplete="address-level2"
                 placeholder="Paris, Lyon…"
                 value="{{ request.form.get('lieu_ville','') }}">
        </label>

        <label>
          <span class="label-text">Date(s) et horaires <span class="req">*</span></span>
          <input type="text" id="dates_horaires" name="dates_horaires" required
                 placeholder="Ex : 15/12 (14h-16h), 18/12 (10h-12h)"
                 value="{{ request.form.get('dates_horaires','') }}">
        </label>
      </div>

      <div class="grid-2">
        <label>
          <span class="label-text">Genre recherché <span class="req">*</span></span>
          <input type="text" id="genre_recherche" name="genre_recherche" required
                 placeholder="Magie, théâtre, clown, musique…"
                 value="{{ request.form.get('genre_recherche','') }}">
        </label>

        <label>
          <span class="label-text">Tranche d'âge du public <span class="req">*</span></span>
          <select id="age_range" name="age_range" required>
            <option value="">-- Choisir --</option>
            <option value="enfant" {% if request.form.get('age_range','') == 'enfant' %}selected{% endif %}>Enfant</option>
            <option value="adulte" {% if request.form.get('age_range','') == 'adulte' %}selected{% endif %}>Adulte</option>
            <option value="tout public" {% if request.form.get('age_range','') == 'tout public' %}selected{% endif %}>Tout public</option>
          </select>
          <small class="hint">Aide au choix de l'artiste / spectacle.</small>
        </label>
      </div>

      <div class="grid-2">
        <label>
          <span class="label-text">Jauge estimée <span class="req">*</span></span>
          <input type="number" id="jauge" name="jauge" min="1" step="1" required inputmode="numeric"
                 placeholder="Ex : 120"
                 value="{{ request.form.get('jauge','') }}">
        </label>

        <label>
          <span class="label-text">Budget indicatif <span class="req">*</span></span>
          <input type="text" id="budget" name="budget" required
                 placeholder="Ex : 1000–1500 €"
                 value="{{ request.form.get('budget','') }}">
          <small class="hint">Même une fourchette aide à proposer les bonnes options.</small>
        </label>
      </div>
    </fieldset>

    <fieldset class="demande-section">
      <legend>3) L'espace / contraintes</legend>

      <label style="margin-bottom: 0;">
        <span class="label-text">Type d'espace mis à disposition <span class="req">*</span></span>
        <input type="text" id="type_espace" name="type_espace" required
               placeholder="Salle polyvalente, gymnase, plein air…"
               value="{{ request.form.get('type_espace','') }}">
      </label>

      <details class="demande-details">
        <summary>▸ Ajouter des précisions (optionnel)</summary>
        <div class="grid-2" style="margin-top:16px;">
          <label>
            <span class="label-text">Contraintes techniques</span>
            <textarea id="contraintes" name="contraintes" rows="4"
                      placeholder="Scène, hauteur sous plafond, noir total, régie, puissance électrique…">{{ request.form.get('contraintes','') }}</textarea>
          </label>

          <label>
            <span class="label-text">Accessibilité</span>
            <textarea id="accessibilite" name="accessibilite" rows="4"
                      placeholder="PMR, parking, déchargement, ascenseur…">{{ request.form.get('accessibilite','') }}</textarea>
          </label>
        </div>
      </details>
    </fieldset>

    <div class="demande-actions">
      <button type="submit" class="publish-btn" style="width:100%; padding:14px; font-size:1rem;">
        Envoyer la demande
      </button>
      <button type="submit" class="publish-btn" style="width:100%; padding:14px; font-size:1rem; border-radius:10px; background:linear-gradient(135deg,#1976d2 0%,#355c7d 100%); color:#fff; font-weight:700; border:none; box-shadow:0 2px 8px #1976d244; transition:all 0.2s;">
      <p class="text-muted" style="margin:12px 0 0 0; font-size:0.85rem; text-align:center;">
        Réponse rapide — vous serez contacté par e-mail / téléphone.
      </p>
    </div>
  </form>
</div>

{# Hide SEO block on this conversion-focused page #}
<style>
    .demande-form input,
    .demande-form textarea,
    .demande-form select {
      background:linear-gradient(135deg,#22335a 0%,#2d4263 100%);
      color:#fff;
      border:1.5px solid #355c7d;
      border-radius:8px;
      font-size:1rem;
      font-family:inherit;
      padding:12px 16px;
      transition:all 0.2s;
      box-shadow:0 1px 4px #16244722;
    }
    .demande-form input:focus,
    .demande-form textarea:focus,
    .demande-form select:focus {
      outline:none;
      border-color:#1976d2;
      box-shadow:0 0 0 3px #1976d244;
    }
    .demande-form input::placeholder,
    .demande-form textarea::placeholder {
      color:#b0b8d8;
      opacity:0.8;
    }
  main.container .seo-block { display: none; }
</style>
{% endblock %}
