{% extends "base.html" %}

{% block title %}{{ show.title }}{% if show.raison_sociale %} par {{ show.raison_sociale }}{% endif %} - Spectacle'ment Votre{% endblock %}

{% block description %}{{ show.description[:160] if show.description else 'D\u00e9couvrez ' + show.title + ' - Spectacle et animation professionnelle.' }}{% endblock %}

{% block og_title %}{{ show.title }}{% if show.raison_sociale %} par {{ show.raison_sociale }}{% endif %}{% endblock %}

{% block og_description %}{{ show.description[:200] if show.description else 'D\u00e9couvrez ce spectacle exceptionnel sur Spectacle\'ment Votre.' }}{% endblock %}

{% block og_image %}{% if show.has_image() %}{{ url_for('uploaded_file', filename=show.file_name, _external=True) }}{% else %}{{ url_for('static', filename='img/default-og.jpg', _external=True) }}{% endif %}{% endblock %}

{% block twitter_title %}{{ show.title }}{% endblock %}

{% block twitter_description %}{{ show.description[:160] if show.description else 'D\u00e9couvrez ce spectacle sur Spectacle\'ment Votre' }}{% endblock %}

{% block twitter_image %}{% if show.has_image() %}{{ url_for('uploaded_file', filename=show.file_name, _external=True) }}{% else %}{{ url_for('static', filename='img/default-og.jpg', _external=True) }}{% endif %}{% endblock %}

{% block content %}

<div style="max-width:800px; margin:0 auto;">
  <a href="{{ url_for('home') }}" style="display:inline-block; margin-bottom:16px; color:var(--text); text-decoration:none;">‚Üê Retour aux spectacles</a>
  
  <article class="card" style="max-width:none;">
    {% if show.has_image() or show.is_pdf() %}
      <div class="media" style="aspect-ratio:16/9; max-height:400px;">
        {% if show.has_image() %}
          <img src="{{ url_for('uploaded_file', filename=show.file_name) }}" alt="{{ show.title }}" style="width:100%; height:100%; object-fit:contain;">
        {% elif show.is_pdf() %}
          <a class="pdf-thumb" href="{{ url_for('uploaded_file', filename=show.file_name) }}" target="_blank" style="font-size:2rem;">üìÑ Voir le PDF</a>
        {% endif %}
      </div>
    {% endif %}

    <div class="content" style="padding:24px;">
      {% if show.raison_sociale %}
        <p style="font-size:1.1rem; font-weight:600; color:var(--primary); margin-bottom:8px;">{{ show.raison_sociale }}</p>
      {% endif %}
      <h1 style="margin-top:0;">{{ show.title }}</h1>
      
      <div style="display:flex; gap:16px; flex-wrap:wrap; margin-bottom:16px;">
        {% if show.category %}
          <span class="badge">{{ show.category }}</span>
        {% endif %}
        {% if show.region %}
          <span class="badge">üó∫Ô∏è {{ show.region }}</span>
        {% endif %}
        {% if show.location %}
          <span class="badge">üìç {{ show.location }}</span>
        {% endif %}
        {% if show.age_range %}
          <span class="badge">üë∂ {{ show.age_range }}</span>
        {% endif %}
        {% if show.date %}
          <span class="badge">üìÖ {{ show.date.strftime('%d/%m/%Y') }}</span>
        {% endif %}
      </div>

  <!-- ...badges... -->
      {% if show.contact_email or show.site_internet %}
        <div style="margin:24px 0;">
          <h3>Contact</h3>
          {% if show.contact_email %}
            <p>
              <a href="mailto:{{ show.contact_email }}" style="color:var(--primary); text-decoration:none;">
                ‚úâÔ∏è {{ show.contact_email }}
              </a>
            </p>
          {% endif %}
          {% if show.contact_phone %}
            <p>
              <span style="color:var(--primary);">üìû {{ show.contact_phone }}</span>
            </p>
          {% endif %}
          {% if show.site_internet %}
            <p>
              <a href="{{ show.site_internet }}" target="_blank" style="color:#fff;text-decoration:underline;">üåê {{ show.site_internet }}</a>
            </p>
          {% endif %}
        </div>
      {% endif %}

      {% if show.description %}
        <div style="margin:24px 0;">
          <h3>Description</h3>
          <p style="line-height:1.6; color:#ddd;">{{ show.description }}</p>
        </div>
      {% endif %}
  <!-- ...contact, description... -->
</div>
<style>
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 0.9rem;
  color: var(--text);
}
</style>
{% endblock %}
