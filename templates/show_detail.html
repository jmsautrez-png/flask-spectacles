{% extends "base.html" %}

{% block title %}{{ show.title }}{% if show.raison_sociale %} par {{ show.raison_sociale }}{% endif %} - Spectacle'ment V√òtre{% endblock %}

{% block description %}{{ show.description[:160] if show.description else 'D\u00e9couvrez ' + show.title + ' - Spectacle et animation professionnelle.' }}{% endblock %}

{% block og_title %}{{ show.title }}{% if show.raison_sociale %} par {{ show.raison_sociale }}{% endif %}{% endblock %}

{% block og_description %}{{ show.description[:200] if show.description else 'D\u00e9couvrez ce spectacle exceptionnel sur Spectacle\'ment V√òtre.' }}{% endblock %}

{% block og_image %}{% if show.has_image() %}{{ url_for('uploaded_file', filename=show.file_name, _external=True) }}{% else %}{{ url_for('static', filename='img/default-og.svg', _external=True) }}{% endif %}{% endblock %}

{% block twitter_title %}{{ show.title }}{% endblock %}

{% block twitter_description %}{{ show.description[:160] if show.description else 'D\u00e9couvrez ce spectacle sur Spectacle\'ment V√òtre' }}{% endblock %}

{% block twitter_image %}{% if show.has_image() %}{{ url_for('uploaded_file', filename=show.file_name, _external=True) }}{% else %}{{ url_for('static', filename='img/default-og.svg', _external=True) }}{% endif %}{% endblock %}

{% block seo_block %}
{# Hide SEO block on detail pages #}
{% endblock %}

{% block content %}

<div style="max-width:900px; margin:0 auto;">
  <!-- Back Button -->
  <a href="{{ url_for('home') }}" class="back-link" style="display:inline-flex; align-items:center; gap:8px; margin-bottom:24px; padding:10px 16px; color:var(--text); text-decoration:none; background:var(--panel); border:1px solid var(--border); border-radius:8px; font-weight:500; transition:all 0.2s ease;">
    <span>‚Üê</span> Retour aux spectacles
  </a>
  
  <article class="card" style="max-width:none; box-shadow:0 4px 16px rgba(0,0,0,0.2);">
    {% if show.has_image() or show.is_pdf() %}
      <div class="media" style="aspect-ratio:16/9; max-height:450px;">
        {% if show.has_image() %}
          <img src="{{ url_for('uploaded_file', filename=show.file_name) }}" alt="{{ show.title }}" style="width:100%; height:100%; object-fit:cover;">
        {% elif show.is_pdf() %}
          <a class="pdf-thumb" href="{{ url_for('uploaded_file', filename=show.file_name) }}" target="_blank" style="font-size:2rem;">üìÑ Voir le PDF</a>
        {% endif %}
      </div>
    {% endif %}

    <div class="content" style="padding:32px;">
      <!-- Company Name -->
      {% if show.raison_sociale %}
        <p style="font-size:1.15rem; font-weight:700; color:var(--primary); margin:0 0 12px 0; text-transform:uppercase; letter-spacing:0.5px;">{{ show.raison_sociale }}</p>
      {% endif %}
      
      <!-- Title -->
      <h1 style="margin:0 0 20px 0; font-size:2rem; line-height:1.2;">{{ show.title }}</h1>
      
      <!-- Badges -->
      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:32px;">
        {% if show.category %}
          <span class="badge badge-category">{{ show.category }}</span>
        {% endif %}
        {% if show.age_range %}
          <span class="badge">üë∂ {{ show.age_range }}</span>
        {% endif %}
        {% if show.region %}
          <span class="badge">üó∫Ô∏è {{ show.region }}</span>
        {% endif %}
        {% if show.location %}
          <span class="badge">üìç {{ show.location }}</span>
        {% endif %}
        {% if show.date %}
          <span class="badge">üìÖ {{ show.date.strftime('%d/%m/%Y') }}</span>
        {% endif %}
      </div>

      <!-- Description -->
      {% if show.description %}
        <div style="margin-bottom:32px; padding:20px; background:rgba(255,255,255,0.02); border-left:3px solid var(--primary); border-radius:8px;">
          <h3 style="margin:0 0 12px 0; font-size:1.1rem; color:var(--text);">Description</h3>
          <p style="line-height:1.7; color:#ddd; margin:0; font-size:1rem;">{{ show.description }}</p>
        </div>
      {% endif %}

      <!-- Contact Section -->
      {% if show.contact_email or show.contact_phone or show.site_internet %}
        <div style="margin-bottom:32px; padding:24px; background:var(--panel); border:1px solid var(--border); border-radius:12px;">
          <h3 style="margin:0 0 16px 0; font-size:1.2rem; color:var(--text);">Contact</h3>
          <div style="display:flex; flex-direction:column; gap:12px;">
            {% if show.contact_email %}
              <a href="mailto:{{ show.contact_email }}" class="contact-item" style="display:flex; align-items:center; gap:12px; padding:12px 16px; background:rgba(255,255,255,0.03); border:1px solid var(--border); border-radius:8px; color:var(--text); text-decoration:none; transition:all 0.2s ease;">
                <span style="font-size:1.3rem;">‚úâÔ∏è</span>
                <div style="flex:1;">
                  <div style="font-size:0.8rem; color:var(--muted); margin-bottom:2px;">Email</div>
                  <div style="font-weight:500; color:var(--primary);">{{ show.contact_email }}</div>
                </div>
              </a>
            {% endif %}
            
            {% if show.contact_phone %}
              <div class="contact-item" style="display:flex; align-items:center; gap:12px; padding:12px 16px; background:rgba(255,255,255,0.03); border:1px solid var(--border); border-radius:8px;">
                <span style="font-size:1.3rem;">üìû</span>
                <div style="flex:1;">
                  <div style="font-size:0.8rem; color:var(--muted); margin-bottom:2px;">T√©l√©phone</div>
                  <div style="font-weight:600; color:var(--primary); font-size:1.05rem;">{{ show.contact_phone }}</div>
                </div>
              </div>
            {% endif %}
            
            {% if show.site_internet %}
              <a href="{{ show.site_internet }}" target="_blank" rel="noopener" class="contact-item" style="display:flex; align-items:center; gap:12px; padding:12px 16px; background:rgba(255,255,255,0.03); border:1px solid var(--border); border-radius:8px; color:var(--text); text-decoration:none; transition:all 0.2s ease;">
                <span style="font-size:1.3rem;">üåê</span>
                <div style="flex:1;">
                  <div style="font-size:0.8rem; color:var(--muted); margin-bottom:2px;">Site internet</div>
                  <div style="font-weight:500; color:var(--primary); word-break:break-all;">{{ show.site_internet }}</div>
                </div>
                <span style="font-size:1.2rem; opacity:0.5;">‚Üí</span>
              </a>
            {% endif %}
          </div>
        </div>
      {% endif %}

      <!-- Download File -->
      {% if show.file_name %}
        <a href="{{ url_for('uploaded_file', filename=show.file_name) }}" target="_blank" style="display:inline-flex; align-items:center; gap:10px; padding:14px 20px; background:var(--primary); color:white; text-decoration:none; border-radius:10px; font-weight:600; transition:all 0.2s ease; box-shadow:0 2px 8px rgba(220,38,38,0.3);">
          <span style="font-size:1.2rem;">üìé</span>
          T√©l√©charger le fichier
        </a>
      {% endif %}
    </div>
  </article>
</div>

<style>
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 0.9rem;
  color: var(--text);
  font-weight: 500;
}

.badge-category {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
  font-weight: 600;
}

.back-link:hover {
  background: rgba(255,255,255,0.05);
  transform: translateX(-4px);
}

.contact-item:hover {
  background: rgba(255,255,255,0.06) !important;
  border-color: var(--primary) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

a[href*="uploaded_file"]:hover {
  background: var(--primary-hover) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(220,38,38,0.4) !important;
}
</style>
{% endblock %}
